<html lang="en">

<head>
  <link rel="stylesheet" href="..\static\css\style.css">
  <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
  <title>Tekstvereenvoudiging</title>
</head>

<body>

  <div class="container">

    <div class="left-container">
      {% for page in pdf %}
      <div class="page">
        <h1>{{page[1]}}</h1>
        {% for paragraph in page[0] %}
        <p>
          {% for sentence in paragraph %}
          <span class="sentence">
            {% for word in sentence %}
            <span class="word">{{word}}</span>
            {% endfor %}
          </span>
          {% endfor %}
        </p>
        {% endfor %}
      </div>
      {% endfor %}
    </div>

    <!---->
    <div class="right-container">
      <!---->
      <div class="buttons">
        <input type="button" value="Get Selection" onmousedown="getSelectedText()">
      </div>

      <div class="extra-info">
        <p>taal: {{lang}}</p><br>
        <p>titel: {{title}}</p><br>
        <p>onderwerp: {{subject}}</p><br>
      </div>

      <!---->
      <form action="/summarise-with-presets" method="post">
        <textarea name="" id="" cols="30" rows="10" disabled hidden></textarea>

        <!--Statistieken voor de leerkracht-->
        <h2>Statistieken voor de leerkracht</h2>
        {% for s in statistics %}
          {{ s }}
        {% endfor %}

        <!--Tools voor de leerkracht-->
        <h2>Tools voor de leerkracht</h2>
        <fieldset>
          <label for="checkboxTitle">Titels markeren</label><input name="actions" type="radio" id="checkboxTitle"><br>
          <label for="checkboxDeleteSents">Zin verwijderen</label><input type="radio" name="actions"
            id="checkboxDeleteSents"><br>
          <label for="checkboxAddWordToGlossary">Woord toevoegen aan woordenlijst</label><input name="actions"
            type="radio" id="checkboxAddWordToGlossary"><br>
          
            <label for="saveMethod">Opslaan als:</label>
          <select multiple name="saveMethod" id="saveMethod">
            <option value="saveMethodWord">Word</option>
            <option value="saveMethodPDF">PDF</option>
          </select><br>

          <label for="translateMethod">Taal van uitvoerdocument:</label>
          <select multiple name="translateMethod" id="translateMethod">
            <option value="nl">Nederlands</option>
            <option value="fr">Frans</option>
          </select><br>

        </fieldset>

        <!--Lexicale vereenvoudiging-->
        <h2>Lexicale vereenvoudiging</h2>
        <fieldset>
          <input type="checkbox" id="keywords" name="keywords" value="keywords">
          <label for="keywords">Belangrijke kernwoorden automatisch herkennen</label><br>
          <input type="checkbox" id="vocabulary" name="vocabulary" value="vocabulary">
          <label for="vocabulary">Moeilijke woordenschat vervangen</label><br>
        </fieldset>

        <h2>Syntactische vereenvoudiging</h2>
        <fieldset>
          <input type="checkbox" id="syntax" name="syntax" value="syntax">
          <label for="syntax">Tangconstructies aanpassen</label><br>

          <input required type="number" id="length_sentence" name="length_sentence" min="5" max="15">
          <label for="length_sentence">Zinslengte</label><br>

          <input type="checkbox" id="pronouns" name="pronouns" value="pronouns">
          <label for="pronouns">Verwijswoorden aanpassen</label><br>

          <input type="checkbox" id="prepositions" name="prepositions" value="prepositions">
          <label for="prepositions">Voorzetseluitdrukkingen vervangen</label><br>

          <input type="checkbox" id="compound_verbs" name="compound_verbs" value="compound_verbs">
          <label for="compound_verbs">Samengestelde werkwoorden vervangen</label><br>
        </fieldset>


        <h2>Samenvatten</h2>
        <fieldset>
          <input type="checkbox" id="citation" name="citation" value="citation">
          <label for="citation">Bronvermelding</label><br>

          <input type="checkbox" id="paraphrasing" name="paraphrasing" value="paraphrasing">
          <label for="paraphrasing">Parafrasering / abstraherende samenvatting</label><br>

          <input type="checkbox" id="important_sentences" name="important_sentences" value="important_sentences">
          <label for="important_sentences">Automatische markering van de belangrijke zinnen</label><br>

          <input type="checkbox" id="extractive_summary" name="extractive_summary" value="extractive_summary">
          <label for="extractive_summary">Extraherende samenvatting</label><br>

          <input required type="number" id="length_summary" name="length_summary" min="50" max="500">
          <label for="summary_length">Lengte van de samenvatting</label><br>

          <input type="checkbox" id="keyword_summary" name="keyword_summary" value="keyword_summary">
          <label for="keyword_summary">Samenvatten op basis van kernwoorden</label>

          <input required type="number" id="number_paragraphs" name="number_paragraphs" min="1" max="5">
          <label for="number_paragraphs">Aantal paragrafen per titel</label>

        </fieldset>

        <h2>Woordenlijst</h2>
        <fieldset>
          <textarea name="glossaryList" id="glossaryList" cols="30" rows="10"></textarea>
          <button type="submit">Glossary-lijst genereren</button>
        </fieldset>

        <button type="submit" value="Samenvatten" id="summarize-with-presets-button">Volledig document
          samenvatten</button>
      </form>
    </div>
  </div>
</body>
<script>

  /*
  Glossary-lijst aanvullen met woord
  */
  const checkboxAddWordToGlossary = document.getElementById("checkboxAddWordToGlossary");
  checkboxAddWordToGlossary.addEventListener("change", function () {
    if (checkboxAddWordToGlossary.checked) {
      const words = document.querySelectorAll('span.word');
      words.forEach((w) => {
        w.addEventListener('click', async (event) => {
          if (checkboxAddWordToGlossary.checked) {
            var pTag = event.target;
            var textarea = document.getElementById("glossaryList");
            pTag.style.backgroundColor = "black";
            pTag.style.color = "white";
            pTag.style.fontWeight = "bold";
            var page = pTag.parentNode.parentNode.parentNode;
            var pageNumber = page.querySelector('h1').textContent;
            textarea.value += "\n" + pTag.innerHTML + ':' + pageNumber;
          }
        })
      })
    }
  });

  /*
  Deleting sentences
  */
  const checkboxDeleteSents = document.getElementById("checkboxDeleteSents");
  checkboxDeleteSents.addEventListener("change", function () {
    if (checkboxDeleteSents.checked) {
      const sentences = document.querySelectorAll('.sentence');
      sentences.forEach((span) => {
        span.addEventListener('click', async (event) => {
          if (checkboxDeleteSents.checked) span.remove();
        })
      })
    }
  });

  /*
  Marking titles as a teacher
  */
  const checkboxTitle = document.getElementById("checkboxTitle");
  checkboxTitle.addEventListener("change", function () {
    if (checkboxTitle.checked) {
      const sentences = document.querySelectorAll('.sentence');
      sentences.forEach((span) => {
        span.addEventListener('click', async (event) => {
          if (checkboxTitle.checked) {
            var title = document.createElement("h3");
            title.innerHTML = span.innerHTML;
            span.parentNode.replaceChild(title, span);
          };
        });
      });
    }
  });

  /*
  Tekst ophalen
  */
  async function getSelectedText() {
    var selectedText = window.getSelection().toString();
    console.log('printing selected text')
    const textarea = document.querySelector('textarea');
    textarea.value = selectedText;
  }
</script>

</html>